(self["webpackChunkagents"]=self["webpackChunkagents"]||[]).push([[193],{8193:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.paths.length>0?n("div",[e._v("Exploring "+e._s(e.paths.length)+" paths. ")]):e._e(),n("CommandInput"),"preview"==e.navigation&&null!=e.currentNode?n("Node"):e._e(),n("Graph",{attrs:{nodes:e.nodes,links:e.links,graphNeedUpdate:e.graphNeedUpdate},on:{update:function(t){e.graphNeedUpdate=t}}}),e._v(" "+e._s(e.pod)+" ")],1)},o=[],s=n(2032),i=n(6198),u=(n(5666),n(1539),n(8783),n(3948),n(4553),n(9600),n(4916),n(3123),n(3210),n(4747),n(9826),n(7852),n(8309),n(7327),{name:"Visu",components:{Graph:function(){return n.e(635).then(n.bind(n,635))},CommandInput:function(){return Promise.all([n.e(988),n.e(186)]).then(n.bind(n,8932))},Node:function(){return Promise.all([n.e(988),n.e(191)]).then(n.bind(n,9526))}},data:function(){return{links:[],paths:[],jump:0,graphNeedUpdate:!1}},mounted:function(){console.log("MUST TAKE A LOOK AT COMMUNICA !"),this.showWorlds()},methods:{explore2:function(e){return(0,i.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e);case 1:case"end":return t.stop()}}),t)})))()},onInputObjectChange:function(e){var t,n,r;switch(console.log("onCommand",e),e.type){case"triplet":t=this.nodeFromLabel(e.value.subject),this.saveNode(t),n=this.nodeFromLabel(e.value.object),this.saveNode(n),console.log(t.id,n.id),r=this.edgeFromLabel({source:t.id,target:n.id,label:e.value.predicate}),console.log(r),this.saveEdge(r),e.triple={subject:t,edge:r,object:n},this.$saveToGun(e);break;case"url":console.log(e);break;default:console.log("TODO",e)}},saveNode:function(e){var t=this.nodes.findIndex((function(t){return t.id==e.id}));-1===t?this.nodes.push(e):Object.assign(this.nodes[t],e),this.sendUpdate(e)},saveEdge:function(e){console.log(e),console.log(this.links),this.links.push(e),console.log(this.nodes,this.links),this.sendUpdate(e)},nodeFromLabel:function(e){var t="#"+e.trim().split(" ").join("_");return{id:t,name:e,age:0,type:"neurone"}},edgeFromLabel:function(e){return console.log(e),{source:e.source,target:e.target,label:e.label}},sendUpdate:function(e){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e),console.log("le json",t.json);case 2:case"end":return n.stop()}}),n)})))()},exploreFriends:function(e){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t,r.jump++,e.friends.forEach(function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(n){var o,s,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(n),t.prev=1,void 0==n.webId){t.next=17;break}return o={url:n.webId,name:n.webId,type:"friend",color:"#00ff00",webId:n.webId},console.log(o),t.next=7,r.$getPodInfos(o);case 7:s=t.sent,console.log(s),i=r.nodes.find((function(e){return e.url==o.url})),console.log("exist",i),void 0==i&&r.nodes.push(o),r.links.push({source:e.webId,target:n.webId,label:"friend"}),u={url:s.storage,name:"storage",color:"#ffff00",type:"storage"},r.nodes.push(u),r.links.push({source:n.webId,target:s.storage,label:"storage"}),console.log(r.jump);case 17:console.log("webId undefined",n.webId),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](1),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})))()},explore:function(e){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){var r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(e),!e.endsWith("card#me")){n.next=7;break}return n.next=4,t.$getPodInfos({webId:e});case 4:r=n.sent,e=r.storage,t.exploreFriends(r);case 7:return o=t,n.next=10,t.$getResources(e);case 10:s=n.sent,void 0!=s.compacted?t.processJsonld(s):s.forEach(function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("file"!=n.type){t.next=8;break}return console.log("on entre ici",n),t.next=4,o.$getResource(n);case 4:return t.next=6,o.$getJsonLd(n.url);case 6:r=t.sent,console.log(r);case 8:console.log(n),o.nodes.push(n),o.links.push({source:e,target:n.url});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:case"end":return n.stop()}}),n)})))()},processJsonld:function(e){for(var t="".concat(e.compacted.url),n=-1,r=0;r<this.nodes.length;r++){var o=this.nodes[r];o.url==t&&(n=r,Object.assign(this.nodes[n],e.compacted),this.graphNeedUpdate=!0)}},explore1:function(e){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.paths.push(e),n.next=3,t.$getResources(e);case 3:r=n.sent,console.log(r),o=t,r.forEach((function(t){if("folder"==t.type)o.explore(t.url);else if(t.url.endsWith(".jsonld")||"application/ld+json"==t.file.type){t.color="#ffff00";var n=new FileReader;n.onload=(0,i.Z)(regeneratorRuntime.mark((function e(){var r,o,i,u,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.jsonld=JSON.parse(n.result),t.name=t.jsonld["name"],console.log("jsonld",t.jsonld["properties"]),r=(0,s.Z)(t.jsonld["properties"]);try{for(r.s();!(o=r.n()).done;){i=o.value,console.log(i),u=(0,s.Z)(i.values);try{for(u.s();!(a=u.n()).done;)c=a.value,console.log(c)}catch(l){u.e(l)}finally{u.f()}}}catch(l){r.e(l)}finally{r.f()}case 5:case"end":return e.stop()}}),e)}))),n.onerror=function(e){console.log(e)},n.readAsText(t.file)}else t.url.endsWith(".ttl")&&(t.color="#00ff00");"inbox"==t.name&&(t.color="#ffffff"),o.nodes.push(t),o.links.push({source:e,target:t.url})})),t.paths=t.paths.filter((function(t){return t!==e}));case 8:case"end":return n.stop()}}),n)})))()},showWorlds:function(){var e=this;console.log(this.worlds),this.savedWorld={nodes:this.nodes,links:this.links},this.nodes=[],this.links=[],Object.assign(this.nodes,this.worlds),this.nodes.push({id:"worlds",name:"Worlds",color:"#ffff00",type:"univers"}),this.worlds.forEach((function(t){var n=e.nodes.find((function(e){return e.id===t.status})),r="enabled"==t.status?"#00ff00":"#ff0000";void 0==n&&e.nodes.push({id:t.status,name:t.status,color:r,type:"status"}),e.links.push({source:t.id,target:t.status,label:"status"}),e.links.push({source:"worlds",target:t.status})}))}},watch:{pod:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:null!=e.pod?(console.log(e.pod),n={url:e.pod.storage,name:"storage",color:"#ffff00",type:"storage"},e.nodes.push(n),r={url:e.pod.webId,name:e.pod.name||e.pod.webId,color:"#ff0000",type:"webId"},e.nodes.push(r),e.links.push({source:e.pod.webId,target:e.pod.storage,label:"storage"}),e.explore(e.pod.storage),e.exploreFriends(e.pod)):(e.nodes=[],e.links=[]);case 1:case"end":return t.stop()}}),t)})))()},mustExplore:function(){var e=this;if(null!=this.mustExplore){console.log("mustExplore",this.mustExplore);var t=this.nodes.find((function(t){return t.url=e.mustExplore})),n=this.mustExplore;console.log("exist ? ",t),void 0==t&&this.nodes.push({id:n,url:n,name:n,color:"#ff00ff",type:"storage"}),this.explore(this.mustExplore)}},inputObject:function(){this.onInputObjectChange(this.inputObject)},worlds:function(){this.showWorlds()}},computed:{pod:{get:function(){return this.$store.state.solid.pod},set:function(){}},mustExplore:{get:function(){return this.$store.state.app.mustExplore},set:function(){}},inputObject:{get:function(){return this.$store.state.app.inputObject},set:function(){}},nodes:{get:function(){return this.$store.state.nodes.nodes},set:function(){}},worlds:{get:function(){return this.$store.state.app.worlds},set:function(){}},navigation:{get:function(){return this.$store.state.app.navigation},set:function(){}},currentNode:{get:function(){return this.$store.state.app.currentNode},set:function(){}}}}),a=u,c=n(1001),l=(0,c.Z)(a,r,o,!1,null,null,null),d=l.exports},6091:function(e,t,n){var r=n(6530).PROPER,o=n(7293),s=n(1361),i="​᠎";e.exports=function(e){return o((function(){return!!s[e]()||i[e]()!==i||r&&s[e].name!==e}))}},3111:function(e,t,n){var r=n(1702),o=n(4488),s=n(1340),i=n(1361),u=r("".replace),a="["+i+"]",c=RegExp("^"+a+a+"*"),l=RegExp(a+a+"*$"),d=function(e){return function(t){var n=s(o(t));return 1&e&&(n=u(n,c,"")),2&e&&(n=u(n,l,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},7327:function(e,t,n){"use strict";var r=n(2109),o=n(2092).filter,s=n(1194),i=s("filter");r({target:"Array",proto:!0,forced:!i},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},9826:function(e,t,n){"use strict";var r=n(2109),o=n(2092).find,s=n(1223),i="find",u=!0;i in[]&&Array(1)[i]((function(){u=!1})),r({target:"Array",proto:!0,forced:u},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s(i)},9600:function(e,t,n){"use strict";var r=n(2109),o=n(1702),s=n(8361),i=n(5656),u=n(9341),a=o([].join),c=s!=Object,l=u("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(e){return a(i(this),void 0===e?",":e)}})},3210:function(e,t,n){"use strict";var r=n(2109),o=n(3111).trim,s=n(6091);r({target:"String",proto:!0,forced:s("trim")},{trim:function(){return o(this)}})}}]);
//# sourceMappingURL=193-legacy.d2316e7b.js.map