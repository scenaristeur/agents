{"version":3,"file":"js/698-legacy.ed8c1230.js","mappings":"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","sources":["webpack://agents/./src/components/gun/GunLogin.vue?8999","webpack://agents/src/components/gun/GunLogin.vue","webpack://agents/./src/components/gun/GunLogin.vue?e14d","webpack://agents/./src/components/gun/GunLogin.vue","webpack://agents/./node_modules/core-js/internals/string-trim-forced.js","webpack://agents/./node_modules/core-js/internals/string-trim.js","webpack://agents/./node_modules/core-js/internals/whitespaces.js","webpack://agents/./node_modules/core-js/modules/es.string.trim.js","webpack://agents/./node_modules/gun/sea.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modal-gun-login\",modifiers:{\"modal-gun-login\":true}}]},[_vm._v(\"Gun Login\")]),_c('b-modal',{attrs:{\"id\":\"modal-gun-login\",\"title\":\"Gun Login\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('label',{attrs:{\"for\":\"username\"}},[_c('code',[_vm._v(\"username\")]),_vm._v(\":\")])]),_c('b-col',{attrs:{\"sm\":\"9\"}},[_c('b-form-input',{attrs:{\"id\":\"username\",\"type\":\"text\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}})],1)],1),_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"3\"}},[_c('label',{attrs:{\"for\":\"passphrase\"}},[_c('code',[_vm._v(\"passphrase\")]),_vm._v(\":\")])]),_c('b-col',{attrs:{\"sm\":\"9\"}},[_c('b-form-input',{attrs:{\"id\":\"passphrase\",\"type\":\"password\"},model:{value:(_vm.passphrase),callback:function ($$v) {_vm.passphrase=$$v},expression:\"passphrase\"}})],1)],1),_c('b-button',{on:{\"click\":_vm.login}},[_vm._v(\"Log In\")]),_c('b-button',{on:{\"click\":_vm.leave}},[_vm._v(\"Leave\")]),_c('br'),_c('b',[_vm._v(_vm._s(_vm.message))])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <b-button v-b-modal.modal-gun-login>Gun Login</b-button>\n\n    <b-modal id=\"modal-gun-login\" title=\"Gun Login\">\n      <b-row class=\"my-1\" >\n        <b-col sm=\"3\">\n          <label for=\"username\"><code>username</code>:</label>\n        </b-col>\n        <b-col sm=\"9\">\n          <b-form-input id=\"username\" v-model=\"username\" type=\"text\"></b-form-input>\n        </b-col>\n      </b-row>\n\n      <b-row class=\"my-1\" >\n        <b-col sm=\"3\">\n          <label for=\"passphrase\"><code>passphrase</code>:</label>\n        </b-col>\n        <b-col sm=\"9\">\n          <b-form-input id=\"passphrase\" v-model=\"passphrase\" type=\"password\"></b-form-input>\n        </b-col>\n      </b-row>\n\n      <b-button @click=\"login\">Log In</b-button>\n      <b-button @click=\"leave\">Leave</b-button>\n      <br>\n      <b>{{message}}</b>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport SEA from 'gun/sea'; // Required for SEA functions and user authentication\n\nexport default {\n  name: \"GunLogin\",\n  data(){\n    return {\n      username: \"\",\n      passphrase: \"\",\n      message: \"\",\n      user: undefined\n    }\n  },\n  async created(){\n    console.log(\"SEA\", SEA)\n    this.user = this.$gun.user()\n\n    //console.log(\"todo change password with user.auth(alias, passphrase, callback, { change: 'new-pass-value' }) https://gun.eco/docs/FAQ#how-can-i-change-a-user-password\")\n    //  await this.testSea()\n  },\n  methods:{\n    async leave(){\n      this.user.leave()\n      this.$store.commit('gun/setGunUser', undefined)\n    },\n    async login(){\n      this.message = \"\"\n      //console.log(this.username, this.passphrase)\n\n      await this.user.auth(this.username.trim(), this.passphrase.trim(), this.loginCallback);\n\n    },\n    loginCallback(ack){\n      console.log(\"user\",this.user, ack)\n      if (this.user.is) {\n        // console.log('You are logged in');\n        this.message = \"You are logged in\"\n        this.$store.commit('gun/setGunUser', this.user.is)\n      } else {\n        // console.log('You are not logged in');\n        this.$store.commit('gun/setGunUser', undefined)\n        this.message = \"Error : \"+ack.err\n      }\n      // if (ack.err){\n      //   // console.log(\"creationCallback\", ack)\n      //   this.message = \"Error : \"+ack.err\n      //   //this.$store.commit('gun/setGunUser', \"not 2\")\n      // }else{\n      //   console.log(\"ack\",ack)\n      //   this.message = \"User logged in\"\n      // }\n    },\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GunLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GunLogin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GunLogin.vue?vue&type=template&id=8ae9ead4&\"\nimport script from \"./GunLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./GunLogin.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar replace = uncurryThis(''.replace);\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n",";(function(){\n\n  /* UNBUILD */\n  function USE(arg, req){\n    return req? require(arg) : arg.slice? USE[R(arg)] : function(mod, path){\n      arg(mod = {exports: {}});\n      USE[R(path)] = mod.exports;\n    }\n    function R(p){\n      return p.split('/').slice(-1).toString().replace('.js','');\n    }\n  }\n  if(typeof module !== \"undefined\"){ var MODULE = module }\n  /* UNBUILD */\n\n  ;USE(function(module){\n    // Security, Encryption, and Authorization: SEA.js\n    // MANDATORY READING: https://gun.eco/explainers/data/security.html\n    // IT IS IMPLEMENTED IN A POLYFILL/SHIM APPROACH.\n    // THIS IS AN EARLY ALPHA!\n\n    if(typeof window !== \"undefined\"){ module.window = window }\n\n    var tmp = module.window || module, u;\n    var SEA = tmp.SEA || {};\n\n    if(SEA.window = module.window){ SEA.window.SEA = SEA }\n\n    try{ if(u+'' !== typeof MODULE){ MODULE.exports = SEA } }catch(e){}\n    module.exports = SEA;\n  })(USE, './root');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    try{ if(SEA.window){\n      if(location.protocol.indexOf('s') < 0\n      && location.host.indexOf('localhost') < 0\n      && ! /^127\\.\\d+\\.\\d+\\.\\d+$/.test(location.hostname)\n      && location.protocol.indexOf('file:') < 0){\n        console.warn('HTTPS needed for WebCrypto in SEA, redirecting...');\n        location.protocol = 'https:'; // WebCrypto does NOT work without HTTPS!\n      }\n    } }catch(e){}\n  })(USE, './https');\n\n  ;USE(function(module){\n    var u;\n    if(u+''== typeof btoa){\n      if(u+'' == typeof Buffer){\n        try{ global.Buffer = USE(\"buffer\", 1).Buffer }catch(e){ console.log(\"Please `npm install buffer` or add it to your package.json !\") }\n      }\n      global.btoa = function(data){ return Buffer.from(data, \"binary\").toString(\"base64\") };\n      global.atob = function(data){ return Buffer.from(data, \"base64\").toString(\"binary\") };\n    }\n  })(USE, './base64');\n\n  ;USE(function(module){\n    USE('./base64');\n    // This is Array extended to have .toString(['utf8'|'hex'|'base64'])\n    function SeaArray() {}\n    Object.assign(SeaArray, { from: Array.from })\n    SeaArray.prototype = Object.create(Array.prototype)\n    SeaArray.prototype.toString = function(enc, start, end) { enc = enc || 'utf8'; start = start || 0;\n      const length = this.length\n      if (enc === 'hex') {\n        const buf = new Uint8Array(this)\n        return [ ...Array(((end && (end + 1)) || length) - start).keys()]\n        .map((i) => buf[ i + start ].toString(16).padStart(2, '0')).join('')\n      }\n      if (enc === 'utf8') {\n        return Array.from(\n          { length: (end || length) - start },\n          (_, i) => String.fromCharCode(this[ i + start])\n        ).join('')\n      }\n      if (enc === 'base64') {\n        return btoa(this)\n      }\n    }\n    module.exports = SeaArray;\n  })(USE, './array');\n\n  ;USE(function(module){\n    USE('./base64');\n    // This is Buffer implementation used in SEA. Functionality is mostly\n    // compatible with NodeJS 'safe-buffer' and is used for encoding conversions\n    // between binary and 'hex' | 'utf8' | 'base64'\n    // See documentation and validation for safe implementation in:\n    // https://github.com/feross/safe-buffer#update\n    var SeaArray = USE('./array');\n    function SafeBuffer(...props) {\n      console.warn('new SafeBuffer() is depreciated, please use SafeBuffer.from()')\n      return SafeBuffer.from(...props)\n    }\n    SafeBuffer.prototype = Object.create(Array.prototype)\n    Object.assign(SafeBuffer, {\n      // (data, enc) where typeof data === 'string' then enc === 'utf8'|'hex'|'base64'\n      from() {\n        if (!Object.keys(arguments).length || arguments[0]==null) {\n          throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n        }\n        const input = arguments[0]\n        let buf\n        if (typeof input === 'string') {\n          const enc = arguments[1] || 'utf8'\n          if (enc === 'hex') {\n            const bytes = input.match(/([\\da-fA-F]{2})/g)\n            .map((byte) => parseInt(byte, 16))\n            if (!bytes || !bytes.length) {\n              throw new TypeError('Invalid first argument for type \\'hex\\'.')\n            }\n            buf = SeaArray.from(bytes)\n          } else if (enc === 'utf8' || 'binary' === enc) { // EDIT BY MARK: I think this is safe, tested it against a couple \"binary\" strings. This lets SafeBuffer match NodeJS Buffer behavior more where it safely btoas regular strings.\n            const length = input.length\n            const words = new Uint16Array(length)\n            Array.from({ length: length }, (_, i) => words[i] = input.charCodeAt(i))\n            buf = SeaArray.from(words)\n          } else if (enc === 'base64') {\n            const dec = atob(input)\n            const length = dec.length\n            const bytes = new Uint8Array(length)\n            Array.from({ length: length }, (_, i) => bytes[i] = dec.charCodeAt(i))\n            buf = SeaArray.from(bytes)\n          } else if (enc === 'binary') { // deprecated by above comment\n            buf = SeaArray.from(input) // some btoas were mishandled.\n          } else {\n            console.info('SafeBuffer.from unknown encoding: '+enc)\n          }\n          return buf\n        }\n        const byteLength = input.byteLength // what is going on here? FOR MARTTI\n        const length = input.byteLength ? input.byteLength : input.length\n        if (length) {\n          let buf\n          if (input instanceof ArrayBuffer) {\n            buf = new Uint8Array(input)\n          }\n          return SeaArray.from(buf || input)\n        }\n      },\n      // This is 'safe-buffer.alloc' sans encoding support\n      alloc(length, fill = 0 /*, enc*/ ) {\n        return SeaArray.from(new Uint8Array(Array.from({ length: length }, () => fill)))\n      },\n      // This is normal UNSAFE 'buffer.alloc' or 'new Buffer(length)' - don't use!\n      allocUnsafe(length) {\n        return SeaArray.from(new Uint8Array(Array.from({ length : length })))\n      },\n      // This puts together array of array like members\n      concat(arr) { // octet array\n        if (!Array.isArray(arr)) {\n          throw new TypeError('First argument must be Array containing ArrayBuffer or Uint8Array instances.')\n        }\n        return SeaArray.from(arr.reduce((ret, item) => ret.concat(Array.from(item)), []))\n      }\n    })\n    SafeBuffer.prototype.from = SafeBuffer.from\n    SafeBuffer.prototype.toString = SeaArray.prototype.toString\n\n    module.exports = SafeBuffer;\n  })(USE, './buffer');\n\n  ;USE(function(module){\n    const SEA = USE('./root')\n    const api = {Buffer: USE('./buffer')}\n    var o = {}, u;\n\n    // ideally we can move away from JSON entirely? unlikely due to compatibility issues... oh well.\n    JSON.parseAsync = JSON.parseAsync || function(t,cb,r){ var u; try{ cb(u, JSON.parse(t,r)) }catch(e){ cb(e) } }\n    JSON.stringifyAsync = JSON.stringifyAsync || function(v,cb,r,s){ var u; try{ cb(u, JSON.stringify(v,r,s)) }catch(e){ cb(e) } }\n\n    api.parse = function(t,r){ return new Promise(function(res, rej){\n      JSON.parseAsync(t,function(err, raw){ err? rej(err) : res(raw) },r);\n    })}\n    api.stringify = function(v,r,s){ return new Promise(function(res, rej){\n      JSON.stringifyAsync(v,function(err, raw){ err? rej(err) : res(raw) },r,s);\n    })}\n\n    if(SEA.window){\n      api.crypto = window.crypto || window.msCrypto\n      api.subtle = (api.crypto||o).subtle || (api.crypto||o).webkitSubtle;\n      api.TextEncoder = window.TextEncoder;\n      api.TextDecoder = window.TextDecoder;\n      api.random = (len) => api.Buffer.from(api.crypto.getRandomValues(new Uint8Array(api.Buffer.alloc(len))));\n    }\n    if(!api.TextDecoder)\n    {\n      const { TextEncoder, TextDecoder } = USE((u+'' == typeof MODULE?'.':'')+'./lib/text-encoding', 1);\n      api.TextDecoder = TextDecoder;\n      api.TextEncoder = TextEncoder;\n    }\n    if(!api.crypto)\n    {\n      try\n      {\n      var crypto = USE('crypto', 1);\n      Object.assign(api, {\n        crypto,\n        random: (len) => api.Buffer.from(crypto.randomBytes(len))\n      });      \n      const { Crypto: WebCrypto } = USE('@peculiar/webcrypto', 1);\n      api.ossl = api.subtle = new WebCrypto({directory: 'ossl'}).subtle // ECDH\n    }\n    catch(e){\n      console.log(\"Please `npm install @peculiar/webcrypto` or add it to your package.json !\");\n    }}\n\n    module.exports = api\n  })(USE, './shim');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    var shim = USE('./shim');\n    var s = {};\n    s.pbkdf2 = {hash: {name : 'SHA-256'}, iter: 100000, ks: 64};\n    s.ecdsa = {\n      pair: {name: 'ECDSA', namedCurve: 'P-256'},\n      sign: {name: 'ECDSA', hash: {name: 'SHA-256'}}\n    };\n    s.ecdh = {name: 'ECDH', namedCurve: 'P-256'};\n\n    // This creates Web Cryptography API compliant JWK for sign/verify purposes\n    s.jwk = function(pub, d){  // d === priv\n      pub = pub.split('.');\n      var x = pub[0], y = pub[1];\n      var jwk = {kty: \"EC\", crv: \"P-256\", x: x, y: y, ext: true};\n      jwk.key_ops = d ? ['sign'] : ['verify'];\n      if(d){ jwk.d = d }\n      return jwk;\n    };\n    \n    s.keyToJwk = function(keyBytes) {\n      const keyB64 = keyBytes.toString('base64');\n      const k = keyB64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/\\=/g, '');\n      return { kty: 'oct', k: k, ext: false, alg: 'A256GCM' };\n    }\n\n    s.recall = {\n      validity: 12 * 60 * 60, // internally in seconds : 12 hours\n      hook: function(props){ return props } // { iat, exp, alias, remember } // or return new Promise((resolve, reject) => resolve(props)\n    };\n\n    s.check = function(t){ return (typeof t == 'string') && ('SEA{' === t.slice(0,4)) }\n    s.parse = async function p(t){ try {\n      var yes = (typeof t == 'string');\n      if(yes && 'SEA{' === t.slice(0,4)){ t = t.slice(3) }\n      return yes ? await shim.parse(t) : t;\n      } catch (e) {}\n      return t;\n    }\n\n    SEA.opt = s;\n    module.exports = s\n  })(USE, './settings');\n\n  ;USE(function(module){\n    var shim = USE('./shim');\n    module.exports = async function(d, o){\n      var t = (typeof d == 'string')? d : await shim.stringify(d);\n      var hash = await shim.subtle.digest({name: o||'SHA-256'}, new shim.TextEncoder().encode(t));\n      return shim.Buffer.from(hash);\n    }\n  })(USE, './sha256');\n\n  ;USE(function(module){\n    // This internal func returns SHA-1 hashed data for KeyID generation\n    const __shim = USE('./shim')\n    const subtle = __shim.subtle\n    const ossl = __shim.ossl ? __shim.ossl : subtle\n    const sha1hash = (b) => ossl.digest({name: 'SHA-1'}, new ArrayBuffer(b))\n    module.exports = sha1hash\n  })(USE, './sha1');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    var shim = USE('./shim');\n    var S = USE('./settings');\n    var sha = USE('./sha256');\n    var u;\n\n    SEA.work = SEA.work || (async (data, pair, cb, opt) => { try { // used to be named `proof`\n      var salt = (pair||{}).epub || pair; // epub not recommended, salt should be random!\n      opt = opt || {};\n      if(salt instanceof Function){\n        cb = salt;\n        salt = u;\n      }\n      data = (typeof data == 'string')? data : await shim.stringify(data);\n      if('sha' === (opt.name||'').toLowerCase().slice(0,3)){\n        var rsha = shim.Buffer.from(await sha(data, opt.name), 'binary').toString(opt.encode || 'base64')\n        if(cb){ try{ cb(rsha) }catch(e){console.log(e)} }\n        return rsha;\n      }\n      salt = salt || shim.random(9);\n      var key = await (shim.ossl || shim.subtle).importKey('raw', new shim.TextEncoder().encode(data), {name: opt.name || 'PBKDF2'}, false, ['deriveBits']);\n      var work = await (shim.ossl || shim.subtle).deriveBits({\n        name: opt.name || 'PBKDF2',\n        iterations: opt.iterations || S.pbkdf2.iter,\n        salt: new shim.TextEncoder().encode(opt.salt || salt),\n        hash: opt.hash || S.pbkdf2.hash,\n      }, key, opt.length || (S.pbkdf2.ks * 8))\n      data = shim.random(data.length)  // Erase data in case of passphrase\n      var r = shim.Buffer.from(work, 'binary').toString(opt.encode || 'base64')\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) { \n      console.log(e);\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }});\n\n    module.exports = SEA.work;\n  })(USE, './work');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    var shim = USE('./shim');\n    var S = USE('./settings');\n\n    SEA.name = SEA.name || (async (cb, opt) => { try {\n      if(cb){ try{ cb() }catch(e){console.log(e)} }\n      return;\n    } catch(e) {\n      console.log(e);\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }});\n\n    //SEA.pair = async (data, proof, cb) => { try {\n    SEA.pair = SEA.pair || (async (cb, opt) => { try {\n\n      var ecdhSubtle = shim.ossl || shim.subtle;\n      // First: ECDSA keys for signing/verifying...\n      var sa = await shim.subtle.generateKey({name: 'ECDSA', namedCurve: 'P-256'}, true, [ 'sign', 'verify' ])\n      .then(async (keys) => {\n        // privateKey scope doesn't leak out from here!\n        //const { d: priv } = await shim.subtle.exportKey('jwk', keys.privateKey)\n        var key = {};\n        key.priv = (await shim.subtle.exportKey('jwk', keys.privateKey)).d;\n        var pub = await shim.subtle.exportKey('jwk', keys.publicKey);\n        //const pub = Buff.from([ x, y ].join(':')).toString('base64') // old\n        key.pub = pub.x+'.'+pub.y; // new\n        // x and y are already base64\n        // pub is UTF8 but filename/URL safe (https://www.ietf.org/rfc/rfc3986.txt)\n        // but split on a non-base64 letter.\n        return key;\n      })\n      \n      // To include PGPv4 kind of keyId:\n      // const pubId = await SEA.keyid(keys.pub)\n      // Next: ECDH keys for encryption/decryption...\n\n      try{\n      var dh = await ecdhSubtle.generateKey({name: 'ECDH', namedCurve: 'P-256'}, true, ['deriveKey'])\n      .then(async (keys) => {\n        // privateKey scope doesn't leak out from here!\n        var key = {};\n        key.epriv = (await ecdhSubtle.exportKey('jwk', keys.privateKey)).d;\n        var pub = await ecdhSubtle.exportKey('jwk', keys.publicKey);\n        //const epub = Buff.from([ ex, ey ].join(':')).toString('base64') // old\n        key.epub = pub.x+'.'+pub.y; // new\n        // ex and ey are already base64\n        // epub is UTF8 but filename/URL safe (https://www.ietf.org/rfc/rfc3986.txt)\n        // but split on a non-base64 letter.\n        return key;\n      })\n      }catch(e){\n        if(SEA.window){ throw e }\n        if(e == 'Error: ECDH is not a supported algorithm'){ console.log('Ignoring ECDH...') }\n        else { throw e }\n      } dh = dh || {};\n\n      var r = { pub: sa.pub, priv: sa.priv, /* pubId, */ epub: dh.epub, epriv: dh.epriv }\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) {\n      console.log(e);\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }});\n\n    module.exports = SEA.pair;\n  })(USE, './pair');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    var shim = USE('./shim');\n    var S = USE('./settings');\n    var sha = USE('./sha256');\n    var u;\n\n    SEA.sign = SEA.sign || (async (data, pair, cb, opt) => { try {\n      opt = opt || {};\n      if(!(pair||opt).priv){\n        if(!SEA.I){ throw 'No signing key.' }\n        pair = await SEA.I(null, {what: data, how: 'sign', why: opt.why});\n      }\n      if(u === data){ throw '`undefined` not allowed.' }\n      var json = await S.parse(data);\n      var check = opt.check = opt.check || json;\n      if(SEA.verify && (SEA.opt.check(check) || (check && check.s && check.m))\n      && u !== await SEA.verify(check, pair)){ // don't sign if we already signed it.\n        var r = await S.parse(check);\n        if(!opt.raw){ r = 'SEA' + await shim.stringify(r) }\n        if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n        return r;\n      }\n      var pub = pair.pub;\n      var priv = pair.priv;\n      var jwk = S.jwk(pub, priv);\n      var hash = await sha(json);\n      var sig = await (shim.ossl || shim.subtle).importKey('jwk', jwk, {name: 'ECDSA', namedCurve: 'P-256'}, false, ['sign'])\n      .then((key) => (shim.ossl || shim.subtle).sign({name: 'ECDSA', hash: {name: 'SHA-256'}}, key, new Uint8Array(hash))) // privateKey scope doesn't leak out from here!\n      var r = {m: json, s: shim.Buffer.from(sig, 'binary').toString(opt.encode || 'base64')}\n      if(!opt.raw){ r = 'SEA' + await shim.stringify(r) }\n\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) {\n      console.log(e);\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }});\n\n    module.exports = SEA.sign;\n  })(USE, './sign');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    var shim = USE('./shim');\n    var S = USE('./settings');\n    var sha = USE('./sha256');\n    var u;\n\n    SEA.verify = SEA.verify || (async (data, pair, cb, opt) => { try {\n      var json = await S.parse(data);\n      if(false === pair){ // don't verify!\n        var raw = await S.parse(json.m);\n        if(cb){ try{ cb(raw) }catch(e){console.log(e)} }\n        return raw;\n      }\n      opt = opt || {};\n      // SEA.I // verify is free! Requires no user permission.\n      var pub = pair.pub || pair;\n      var key = SEA.opt.slow_leak? await SEA.opt.slow_leak(pub) : await (shim.ossl || shim.subtle).importKey('jwk', S.jwk(pub), {name: 'ECDSA', namedCurve: 'P-256'}, false, ['verify']);\n      var hash = await sha(json.m);\n      var buf, sig, check, tmp; try{\n        buf = shim.Buffer.from(json.s, opt.encode || 'base64'); // NEW DEFAULT!\n        sig = new Uint8Array(buf);\n        check = await (shim.ossl || shim.subtle).verify({name: 'ECDSA', hash: {name: 'SHA-256'}}, key, sig, new Uint8Array(hash));\n        if(!check){ throw \"Signature did not match.\" }\n      }catch(e){\n        if(SEA.opt.fallback){\n          return await SEA.opt.fall_verify(data, pair, cb, opt);\n        }\n      }\n      var r = check? await S.parse(json.m) : u;\n\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) {\n      console.log(e); // mismatched owner FOR MARTTI\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }});\n\n    module.exports = SEA.verify;\n    // legacy & ossl leak mitigation:\n\n    var knownKeys = {};\n    var keyForPair = SEA.opt.slow_leak = pair => {\n      if (knownKeys[pair]) return knownKeys[pair];\n      var jwk = S.jwk(pair);\n      knownKeys[pair] = (shim.ossl || shim.subtle).importKey(\"jwk\", jwk, {name: 'ECDSA', namedCurve: 'P-256'}, false, [\"verify\"]);\n      return knownKeys[pair];\n    };\n\n    var O = SEA.opt;\n    SEA.opt.fall_verify = async function(data, pair, cb, opt, f){\n      if(f === SEA.opt.fallback){ throw \"Signature did not match\" } f = f || 1;\n      var tmp = data||'';\n      data = SEA.opt.unpack(data) || data;\n      var json = await S.parse(data), pub = pair.pub || pair, key = await SEA.opt.slow_leak(pub);\n      var hash = (f <= SEA.opt.fallback)? shim.Buffer.from(await shim.subtle.digest({name: 'SHA-256'}, new shim.TextEncoder().encode(await S.parse(json.m)))) : await sha(json.m); // this line is old bad buggy code but necessary for old compatibility.\n      var buf; var sig; var check; try{\n        buf = shim.Buffer.from(json.s, opt.encode || 'base64') // NEW DEFAULT!\n        sig = new Uint8Array(buf)\n        check = await (shim.ossl || shim.subtle).verify({name: 'ECDSA', hash: {name: 'SHA-256'}}, key, sig, new Uint8Array(hash))\n        if(!check){ throw \"Signature did not match.\" }\n      }catch(e){ try{\n        buf = shim.Buffer.from(json.s, 'utf8') // AUTO BACKWARD OLD UTF8 DATA!\n        sig = new Uint8Array(buf)\n        check = await (shim.ossl || shim.subtle).verify({name: 'ECDSA', hash: {name: 'SHA-256'}}, key, sig, new Uint8Array(hash))\n        }catch(e){\n        if(!check){ throw \"Signature did not match.\" }\n        }\n      }\n      var r = check? await S.parse(json.m) : u;\n      O.fall_soul = tmp['#']; O.fall_key = tmp['.']; O.fall_val = data; O.fall_state = tmp['>'];\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    }\n    SEA.opt.fallback = 2;\n\n  })(USE, './verify');\n\n  ;USE(function(module){\n    var shim = USE('./shim');\n    var S = USE('./settings');\n    var sha256hash = USE('./sha256');\n\n    const importGen = async (key, salt, opt) => {\n      //const combo = shim.Buffer.concat([shim.Buffer.from(key, 'utf8'), salt || shim.random(8)]).toString('utf8') // old\n      opt = opt || {};\n      const combo = key + (salt || shim.random(8)).toString('utf8'); // new\n      const hash = shim.Buffer.from(await sha256hash(combo), 'binary')\n      \n      const jwkKey = S.keyToJwk(hash)      \n      return await shim.subtle.importKey('jwk', jwkKey, {name:'AES-GCM'}, false, ['encrypt', 'decrypt'])\n    }\n    module.exports = importGen;\n  })(USE, './aeskey');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    var shim = USE('./shim');\n    var S = USE('./settings');\n    var aeskey = USE('./aeskey');\n    var u;\n\n    SEA.encrypt = SEA.encrypt || (async (data, pair, cb, opt) => { try {\n      opt = opt || {};\n      var key = (pair||opt).epriv || pair;\n      if(u === data){ throw '`undefined` not allowed.' }\n      if(!key){\n        if(!SEA.I){ throw 'No encryption key.' }\n        pair = await SEA.I(null, {what: data, how: 'encrypt', why: opt.why});\n        key = pair.epriv || pair;\n      }\n      var msg = (typeof data == 'string')? data : await shim.stringify(data);\n      var rand = {s: shim.random(9), iv: shim.random(15)}; // consider making this 9 and 15 or 18 or 12 to reduce == padding.\n      var ct = await aeskey(key, rand.s, opt).then((aes) => (/*shim.ossl ||*/ shim.subtle).encrypt({ // Keeping the AES key scope as private as possible...\n        name: opt.name || 'AES-GCM', iv: new Uint8Array(rand.iv)\n      }, aes, new shim.TextEncoder().encode(msg)));\n      var r = {\n        ct: shim.Buffer.from(ct, 'binary').toString(opt.encode || 'base64'),\n        iv: rand.iv.toString(opt.encode || 'base64'),\n        s: rand.s.toString(opt.encode || 'base64')\n      }\n      if(!opt.raw){ r = 'SEA' + await shim.stringify(r) }\n\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) { \n      console.log(e);\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }});\n\n    module.exports = SEA.encrypt;\n  })(USE, './encrypt');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    var shim = USE('./shim');\n    var S = USE('./settings');\n    var aeskey = USE('./aeskey');\n\n    SEA.decrypt = SEA.decrypt || (async (data, pair, cb, opt) => { try {\n      opt = opt || {};\n      var key = (pair||opt).epriv || pair;\n      if(!key){\n        if(!SEA.I){ throw 'No decryption key.' }\n        pair = await SEA.I(null, {what: data, how: 'decrypt', why: opt.why});\n        key = pair.epriv || pair;\n      }\n      var json = await S.parse(data);\n      var buf, bufiv, bufct; try{\n        buf = shim.Buffer.from(json.s, opt.encode || 'base64');\n        bufiv = shim.Buffer.from(json.iv, opt.encode || 'base64');\n        bufct = shim.Buffer.from(json.ct, opt.encode || 'base64');\n        var ct = await aeskey(key, buf, opt).then((aes) => (/*shim.ossl ||*/ shim.subtle).decrypt({  // Keeping aesKey scope as private as possible...\n          name: opt.name || 'AES-GCM', iv: new Uint8Array(bufiv), tagLength: 128\n        }, aes, new Uint8Array(bufct)));\n      }catch(e){\n        if('utf8' === opt.encode){ throw \"Could not decrypt\" }\n        if(SEA.opt.fallback){\n          opt.encode = 'utf8';\n          return await SEA.decrypt(data, pair, cb, opt);\n        }\n      }\n      var r = await S.parse(new shim.TextDecoder('utf8').decode(ct));\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) { \n      console.log(e);\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }});\n\n    module.exports = SEA.decrypt;\n  })(USE, './decrypt');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    var shim = USE('./shim');\n    var S = USE('./settings');\n    // Derive shared secret from other's pub and my epub/epriv \n    SEA.secret = SEA.secret || (async (key, pair, cb, opt) => { try {\n      opt = opt || {};\n      if(!pair || !pair.epriv || !pair.epub){\n        if(!SEA.I){ throw 'No secret mix.' }\n        pair = await SEA.I(null, {what: key, how: 'secret', why: opt.why});\n      }\n      var pub = key.epub || key;\n      var epub = pair.epub;\n      var epriv = pair.epriv;\n      var ecdhSubtle = shim.ossl || shim.subtle;\n      var pubKeyData = keysToEcdhJwk(pub);\n      var props = Object.assign({ public: await ecdhSubtle.importKey(...pubKeyData, true, []) },{name: 'ECDH', namedCurve: 'P-256'}); // Thanks to @sirpy !\n      var privKeyData = keysToEcdhJwk(epub, epriv);\n      var derived = await ecdhSubtle.importKey(...privKeyData, false, ['deriveBits']).then(async (privKey) => {\n        // privateKey scope doesn't leak out from here!\n        var derivedBits = await ecdhSubtle.deriveBits(props, privKey, 256);\n        var rawBits = new Uint8Array(derivedBits);\n        var derivedKey = await ecdhSubtle.importKey('raw', rawBits,{ name: 'AES-GCM', length: 256 }, true, [ 'encrypt', 'decrypt' ]);\n        return ecdhSubtle.exportKey('jwk', derivedKey).then(({ k }) => k);\n      })\n      var r = derived;\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) {\n      console.log(e);\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }});\n\n    // can this be replaced with settings.jwk?\n    var keysToEcdhJwk = (pub, d) => { // d === priv\n      //var [ x, y ] = shim.Buffer.from(pub, 'base64').toString('utf8').split(':') // old\n      var [ x, y ] = pub.split('.') // new\n      var jwk = d ? { d: d } : {}\n      return [  // Use with spread returned value...\n        'jwk',\n        Object.assign(\n          jwk,\n          { x: x, y: y, kty: 'EC', crv: 'P-256', ext: true }\n        ), // ??? refactor\n        {name: 'ECDH', namedCurve: 'P-256'}\n      ]\n    }\n\n    module.exports = SEA.secret;\n  })(USE, './secret');\n\n  ;USE(function(module){\n    var SEA = USE('./root');\n    // This is to certify that a group of \"certificants\" can \"put\" anything at a group of matched \"paths\" to the certificate authority's graph\n    SEA.certify = SEA.certify || (async (certificants, policy = {}, authority, cb, opt = {}) => { try {\n      /*\n      The Certify Protocol was made out of love by a Vietnamese code enthusiast. Vietnamese people around the world deserve respect!\n      IMPORTANT: A Certificate is like a Signature. No one knows who (authority) created/signed a cert until you put it into their graph.\n      \"certificants\": '*' or a String (Bob.pub) || an Object that contains \"pub\" as a key || an array of [object || string]. These people will have the rights.\n      \"policy\": A string ('inbox'), or a RAD/LEX object {'*': 'inbox'}, or an Array of RAD/LEX objects or strings. RAD/LEX object can contain key \"?\" with indexOf(\"*\") > -1 to force key equals certificant pub. This rule is used to check against soul+'/'+key using Gun.text.match or String.match.\n      \"authority\": Key pair or priv of the certificate authority.\n      \"cb\": A callback function after all things are done.\n      \"opt\": If opt.expiry (a timestamp) is set, SEA won't sync data after opt.expiry. If opt.block is set, SEA will look for block before syncing.\n      */\n      console.log('SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version.')\n\n      certificants = (() => {\n        var data = []\n        if (certificants) {\n          if ((typeof certificants === 'string' || Array.isArray(certificants)) && certificants.indexOf('*') > -1) return '*'\n          if (typeof certificants === 'string') return certificants\n          if (Array.isArray(certificants)) {\n            if (certificants.length === 1 && certificants[0]) return typeof certificants[0] === 'object' && certificants[0].pub ? certificants[0].pub : typeof certificants[0] === 'string' ? certificants[0] : null\n            certificants.map(certificant => {\n              if (typeof certificant ==='string') data.push(certificant)\n              else if (typeof certificant === 'object' && certificant.pub) data.push(certificant.pub)\n            })\n          }\n\n          if (typeof certificants === 'object' && certificants.pub) return certificants.pub\n          return data.length > 0 ? data : null\n        }\n        return\n      })()\n\n      if (!certificants) return console.log(\"No certificant found.\")\n\n      const expiry = opt.expiry && (typeof opt.expiry === 'number' || typeof opt.expiry === 'string') ? parseFloat(opt.expiry) : null\n      const readPolicy = (policy || {}).read ? policy.read : null\n      const writePolicy = (policy || {}).write ? policy.write : typeof policy === 'string' || Array.isArray(policy) || policy[\"+\"] || policy[\"#\"] || policy[\".\"] || policy[\"=\"] || policy[\"*\"] || policy[\">\"] || policy[\"<\"] ? policy : null\n      // The \"blacklist\" feature is now renamed to \"block\". Why ? BECAUSE BLACK LIVES MATTER!\n      // We can now use 3 keys: block, blacklist, ban\n      const block = (opt || {}).block || (opt || {}).blacklist || (opt || {}).ban || {}\n      const readBlock = block.read && (typeof block.read === 'string' || (block.read || {})['#']) ? block.read : null\n      const writeBlock = typeof block === 'string' ? block : block.write && (typeof block.write === 'string' || block.write['#']) ? block.write : null\n\n      if (!readPolicy && !writePolicy) return console.log(\"No policy found.\")\n\n      // reserved keys: c, e, r, w, rb, wb\n      const data = JSON.stringify({\n        c: certificants,\n        ...(expiry ? {e: expiry} : {}), // inject expiry if possible\n        ...(readPolicy ? {r: readPolicy }  : {}), // \"r\" stands for read, which means read permission.\n        ...(writePolicy ? {w: writePolicy} : {}), // \"w\" stands for write, which means write permission.\n        ...(readBlock ? {rb: readBlock} : {}), // inject READ block if possible\n        ...(writeBlock ? {wb: writeBlock} : {}), // inject WRITE block if possible\n      })\n\n      const certificate = await SEA.sign(data, authority, null, {raw:1})\n\n      var r = certificate\n      if(!opt.raw){ r = 'SEA'+JSON.stringify(r) }\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\n      return r;\n    } catch(e) {\n      SEA.err = e;\n      if(SEA.throw){ throw e }\n      if(cb){ cb() }\n      return;\n    }});\n\n    module.exports = SEA.certify;\n  })(USE, './certify');\n\n  ;USE(function(module){\n    var shim = USE('./shim');\n    // Practical examples about usage found in tests.\n    var SEA = USE('./root');\n    SEA.work = USE('./work');\n    SEA.sign = USE('./sign');\n    SEA.verify = USE('./verify');\n    SEA.encrypt = USE('./encrypt');\n    SEA.decrypt = USE('./decrypt');\n    SEA.certify = USE('./certify');\n    //SEA.opt.aeskey = USE('./aeskey'); // not official! // this causes problems in latest WebCrypto.\n\n    SEA.random = SEA.random || shim.random;\n\n    // This is Buffer used in SEA and usable from Gun/SEA application also.\n    // For documentation see https://nodejs.org/api/buffer.html\n    SEA.Buffer = SEA.Buffer || USE('./buffer');\n\n    // These SEA functions support now ony Promises or\n    // async/await (compatible) code, use those like Promises.\n    //\n    // Creates a wrapper library around Web Crypto API\n    // for various AES, ECDSA, PBKDF2 functions we called above.\n    // Calculate public key KeyID aka PGPv4 (result: 8 bytes as hex string)\n    SEA.keyid = SEA.keyid || (async (pub) => {\n      try {\n        // base64('base64(x):base64(y)') => shim.Buffer(xy)\n        const pb = shim.Buffer.concat(\n          pub.replace(/-/g, '+').replace(/_/g, '/').split('.')\n          .map((t) => shim.Buffer.from(t, 'base64'))\n        )\n        // id is PGPv4 compliant raw key\n        const id = shim.Buffer.concat([\n          shim.Buffer.from([0x99, pb.length / 0x100, pb.length % 0x100]), pb\n        ])\n        const sha1 = await sha1hash(id)\n        const hash = shim.Buffer.from(sha1, 'binary')\n        return hash.toString('hex', hash.length - 8)  // 16-bit ID as hex\n      } catch (e) {\n        console.log(e)\n        throw e\n      }\n    });\n    // all done!\n    // Obviously it is missing MANY necessary features. This is only an alpha release.\n    // Please experiment with it, audit what I've done so far, and complain about what needs to be added.\n    // SEA should be a full suite that is easy and seamless to use.\n    // Again, scroll naer the top, where I provide an EXAMPLE of how to create a user and sign in.\n    // Once logged in, the rest of the code you just read handled automatically signing/validating data.\n    // But all other behavior needs to be equally easy, like opinionated ways of\n    // Adding friends (trusted public keys), sending private messages, etc.\n    // Cheers! Tell me what you think.\n    ((SEA.window||{}).GUN||{}).SEA = SEA;\n\n    module.exports = SEA\n    // -------------- END SEA MODULES --------------------\n    // -- BEGIN SEA+GUN MODULES: BUNDLED BY DEFAULT UNTIL OTHERS USE SEA ON OWN -------\n  })(USE, './sea');\n\n  ;USE(function(module){\n    var SEA = USE('./sea'), Gun, u;\n    if(SEA.window){\n      Gun = SEA.window.GUN || {chain:{}};\n    } else {\n      Gun = USE((u+'' == typeof MODULE?'.':'')+'./gun', 1);\n    }\n    SEA.GUN = Gun;\n\n    function User(root){ \n      this._ = {$: this};\n    }\n    User.prototype = (function(){ function F(){}; F.prototype = Gun.chain; return new F() }()) // Object.create polyfill\n    User.prototype.constructor = User;\n\n    // let's extend the gun chain with a `user` function.\n    // only one user can be logged in at a time, per gun instance.\n    Gun.chain.user = function(pub){\n      var gun = this, root = gun.back(-1), user;\n      if(pub){\n        pub = SEA.opt.pub((pub._||'')['#']) || pub;\n        return root.get('~'+pub);\n      }\n      if(user = root.back('user')){ return user }\n      var root = (root._), at = root, uuid = at.opt.uuid || lex;\n      (at = (user = at.user = gun.chain(new User))._).opt = {};\n      at.opt.uuid = function(cb){\n        var id = uuid(), pub = root.user;\n        if(!pub || !(pub = pub.is) || !(pub = pub.pub)){ return id }\n        id = '~' + pub + '/' + id;\n        if(cb && cb.call){ cb(null, id) }\n        return id;\n      }\n      return user;\n    }\n    function lex(){ return Gun.state().toString(36).replace('.','') }\n    Gun.User = User;\n    User.GUN = Gun;\n    User.SEA = Gun.SEA = SEA;\n    module.exports = User;\n  })(USE, './user');\n\n  ;USE(function(module){\n    var u, Gun = (''+u != typeof window)? (window.Gun||{chain:{}}) : USE((''+u === typeof MODULE?'.':'')+'./gun', 1);\n    Gun.chain.then = function(cb, opt){\n      var gun = this, p = (new Promise(function(res, rej){\n        gun.once(res, opt);\n      }));\n      return cb? p.then(cb) : p;\n    }\n  })(USE, './then');\n\n  ;USE(function(module){\n    var User = USE('./user'), SEA = User.SEA, Gun = User.GUN, noop = function(){};\n\n    // Well first we have to actually create a user. That is what this function does.\n    User.prototype.create = function(...args){\n      var pair = typeof args[0] === 'object' && (args[0].pub || args[0].epub) ? args[0] : typeof args[1] === 'object' && (args[1].pub || args[1].epub) ? args[1] : null;\n      var alias = pair && (pair.pub || pair.epub) ? pair.pub : typeof args[0] === 'string' ? args[0] : null;\n      var pass = pair && (pair.pub || pair.epub) ? pair : alias && typeof args[1] === 'string' ? args[1] : null;\n      var cb = args.filter(arg => typeof arg === 'function')[0] || null; // cb now can stand anywhere, after alias/pass or pair\n      var opt = args && args.length > 1 && typeof args[args.length-1] === 'object' ? args[args.length-1] : {}; // opt is always the last parameter which typeof === 'object' and stands after cb\n      \n      var gun = this, cat = (gun._), root = gun.back(-1);\n      cb = cb || noop;\n      opt = opt || {};\n      if(false !== opt.check){\n        var err;\n        if(!alias){ err = \"No user.\" }\n        if((pass||'').length < 8){ err = \"Password too short!\" }\n        if(err){\n          cb({err: Gun.log(err)});\n          return gun;\n        }\n      }\n      if(cat.ing){\n        (cb || noop)({err: Gun.log(\"User is already being created or authenticated!\"), wait: true});\n        return gun;\n      }\n      cat.ing = true;\n      var act = {}, u;\n      act.a = function(pubs){\n        act.pubs = pubs;\n        if(pubs && !opt.already){\n          // If we can enforce that a user name is already taken, it might be nice to try, but this is not guaranteed.\n          var ack = {err: Gun.log('User already created!')};\n          cat.ing = false;\n          (cb || noop)(ack);\n          gun.leave();\n          return;\n        }\n        act.salt = String.random(64); // pseudo-randomly create a salt, then use PBKDF2 function to extend the password with it.\n        SEA.work(pass, act.salt, act.b); // this will take some short amount of time to produce a proof, which slows brute force attacks.\n      }\n      act.b = function(proof){\n        act.proof = proof;\n        pair ? act.c(pair) : SEA.pair(act.c) // generate a brand new key pair or use the existing.\n      }\n      act.c = function(pair){\n        var tmp\n        act.pair = pair || {};\n        if(tmp = cat.root.user){\n          tmp._.sea = pair;\n          tmp.is = {pub: pair.pub, epub: pair.epub, alias: alias};\n        }\n        // the user's public key doesn't need to be signed. But everything else needs to be signed with it! // we have now automated it! clean up these extra steps now!\n        act.data = {pub: pair.pub};\n        act.d();\n      }\n      act.d = function(){\n        act.data.alias = alias;\n        act.e();\n      }\n      act.e = function(){\n        act.data.epub = act.pair.epub; \n        SEA.encrypt({priv: act.pair.priv, epriv: act.pair.epriv}, act.proof, act.f, {raw:1}); // to keep the private key safe, we AES encrypt it with the proof of work!\n      }\n      act.f = function(auth){\n        act.data.auth = JSON.stringify({ek: auth, s: act.salt}); \n        act.g(act.data.auth);\n      }\n      act.g = function(auth){ var tmp;\n        act.data.auth = act.data.auth || auth;\n        root.get(tmp = '~'+act.pair.pub).put(act.data).on(act.h); // awesome, now we can actually save the user with their public key as their ID.\n        var link = {}; link[tmp] = {'#': tmp}; root.get('~@'+alias).put(link).get(tmp).on(act.i); // next up, we want to associate the alias with the public key. So we add it to the alias list.\n      }\n      act.h = function(data, key, msg, eve){\n        eve.off(); act.h.ok = 1; act.i();\n      }\n      act.i = function(data, key, msg, eve){\n        if(eve){ act.i.ok = 1; eve.off() }\n        if(!act.h.ok || !act.i.ok){ return }\n        cat.ing = false;\n        cb({ok: 0, pub: act.pair.pub}); // callback that the user has been created. (Note: ok = 0 because we didn't wait for disk to ack)\n        if(noop === cb){ pair ? gun.auth(pair) : gun.auth(alias, pass) } // if no callback is passed, auto-login after signing up.\n      }\n      root.get('~@'+alias).once(act.a);\n      return gun;\n    }\n    User.prototype.leave = function(opt, cb){\n      var gun = this, user = (gun.back(-1)._).user;\n      if(user){\n        delete user.is;\n        delete user._.is;\n        delete user._.sea;\n      }\n      if(SEA.window){\n        try{var sS = {};\n        sS = window.sessionStorage;\n        delete sS.recall;\n        delete sS.pair;\n        }catch(e){};\n      }\n      return gun;\n    }\n  })(USE, './create');\n\n  ;USE(function(module){\n    var User = USE('./user'), SEA = User.SEA, Gun = User.GUN, noop = function(){};\n    // now that we have created a user, we want to authenticate them!\n    User.prototype.auth = function(...args){ // TODO: this PR with arguments need to be cleaned up / refactored.\n      var pair = typeof args[0] === 'object' && (args[0].pub || args[0].epub) ? args[0] : typeof args[1] === 'object' && (args[1].pub || args[1].epub) ? args[1] : null;\n      var alias = !pair && typeof args[0] === 'string' ? args[0] : null;\n      var pass = alias && typeof args[1] === 'string' ? args[1] : null;\n      var cb = args.filter(arg => typeof arg === 'function')[0] || null; // cb now can stand anywhere, after alias/pass or pair\n      var opt = args && args.length > 1 && typeof args[args.length-1] === 'object' ? args[args.length-1] : {}; // opt is always the last parameter which typeof === 'object' and stands after cb\n      \n      var gun = this, cat = (gun._), root = gun.back(-1);\n      \n      if(cat.ing){\n        (cb || noop)({err: Gun.log(\"User is already being created or authenticated!\"), wait: true});\n        return gun;\n      }\n      cat.ing = true;\n      \n      var act = {}, u;\n      act.a = function(data){\n        if(!data){ return act.b() }\n        if(!data.pub){\n          var tmp = []; Object.keys(data).forEach(function(k){ if('_'==k){ return } tmp.push(data[k]) })\n          return act.b(tmp);\n        }\n        if(act.name){ return act.f(data) }\n        act.c((act.data = data).auth);\n      }\n      act.b = function(list){\n        var get = (act.list = (act.list||[]).concat(list||[])).shift();\n        if(u === get){\n          if(act.name){ return act.err('Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.') }\n          return act.err('Wrong user or password.') \n        }\n        root.get(get).once(act.a);\n      }\n      act.c = function(auth){\n        if(u === auth){ return act.b() }\n        if('string' == typeof auth){ return act.c(obj_ify(auth)) } // in case of legacy\n        SEA.work(pass, (act.auth = auth).s, act.d, act.enc); // the proof of work is evidence that we've spent some time/effort trying to log in, this slows brute force.\n      }\n      act.d = function(proof){\n        SEA.decrypt(act.auth.ek, proof, act.e, act.enc);\n      }\n      act.e = function(half){\n        if(u === half){\n          if(!act.enc){ // try old format\n            act.enc = {encode: 'utf8'};\n            return act.c(act.auth);\n          } act.enc = null; // end backwards\n          return act.b();\n        }\n        act.half = half;\n        act.f(act.data);\n      }\n      act.f = function(pair){\n        var half = act.half || {}, data = act.data || {};\n        act.g(act.lol = {pub: pair.pub || data.pub, epub: pair.epub || data.epub, priv: pair.priv || half.priv, epriv: pair.epriv || half.epriv});\n      }\n      act.g = function(pair){\n        if(!pair || !pair.pub || !pair.epub){ return act.b() }\n        act.pair = pair;\n        var user = (root._).user, at = (user._);\n        var tmp = at.tag;\n        var upt = at.opt;\n        at = user._ = root.get('~'+pair.pub)._;\n        at.opt = upt;\n        // add our credentials in-memory only to our root user instance\n        user.is = {pub: pair.pub, epub: pair.epub, alias: alias || pair.pub};\n        at.sea = act.pair;\n        cat.ing = false;\n        try{if(pass && u == (obj_ify(cat.root.graph['~'+pair.pub].auth)||'')[':']){ opt.shuffle = opt.change = pass; } }catch(e){} // migrate UTF8 & Shuffle!\n        opt.change? act.z() : (cb || noop)(at);\n        if(SEA.window && ((gun.back('user')._).opt||opt).remember){\n          // TODO: this needs to be modular.\n          try{var sS = {};\n          sS = window.sessionStorage; // TODO: FIX BUG putting on `.is`!\n          sS.recall = true;\n          sS.pair = JSON.stringify(pair); // auth using pair is more reliable than alias/pass\n          }catch(e){}\n        }\n        try{\n          if(root._.tag.auth){ // auth handle might not be registered yet\n          (root._).on('auth', at) // TODO: Deprecate this, emit on user instead! Update docs when you do.\n          } else { setTimeout(function(){ (root._).on('auth', at) },1) } // if not, hackily add a timeout.\n          //at.on('auth', at) // Arrgh, this doesn't work without event \"merge\" code, but \"merge\" code causes stack overflow and crashes after logging in & trying to write data.\n        }catch(e){\n          Gun.log(\"Your 'auth' callback crashed with:\", e);\n        }\n      }\n      act.z = function(){\n        // password update so encrypt private key using new pwd + salt\n        act.salt = String.random(64); // pseudo-random\n        SEA.work(opt.change, act.salt, act.y);\n      }\n      act.y = function(proof){\n        SEA.encrypt({priv: act.pair.priv, epriv: act.pair.epriv}, proof, act.x, {raw:1});\n      }\n      act.x = function(auth){\n        act.w(JSON.stringify({ek: auth, s: act.salt}));\n      }\n      act.w = function(auth){\n        if(opt.shuffle){ // delete in future!\n          console.log('migrate core account from UTF8 & shuffle');\n          var tmp = {}; Object.keys(act.data).forEach(function(k){ tmp[k] = act.data[k] });\n          delete tmp._;\n          tmp.auth = auth;\n          root.get('~'+act.pair.pub).put(tmp);\n        } // end delete\n        root.get('~'+act.pair.pub).get('auth').put(auth, cb || noop);\n      }\n      act.err = function(e){\n        var ack = {err: Gun.log(e || 'User cannot be found!')};\n        cat.ing = false;\n        (cb || noop)(ack);\n      }\n      act.plugin = function(name){\n        if(!(act.name = name)){ return act.err() }\n        var tmp = [name];\n        if('~' !== name[0]){\n          tmp[1] = '~'+name;\n          tmp[2] = '~@'+name;\n        }\n        act.b(tmp);\n      }\n      if(pair){\n        act.g(pair);\n      } else\n      if(alias){\n        root.get('~@'+alias).once(act.a);\n      } else\n      if(!alias && !pass){\n        SEA.name(act.plugin);\n      }\n      return gun;\n    }\n    function obj_ify(o){\n      if('string' != typeof o){ return o }\n      try{o = JSON.parse(o);\n      }catch(e){o={}};\n      return o;\n    }\n  })(USE, './auth');\n\n  ;USE(function(module){\n    var User = USE('./user'), SEA = User.SEA, Gun = User.GUN;\n    User.prototype.recall = function(opt, cb){\n      var gun = this, root = gun.back(-1), tmp;\n      opt = opt || {};\n      if(opt && opt.sessionStorage){\n        if(SEA.window){\n          try{\n            var sS = {};\n            sS = window.sessionStorage; // TODO: FIX BUG putting on `.is`!\n            if(sS){\n              (root._).opt.remember = true;\n              ((gun.back('user')._).opt||opt).remember = true;\n              if(sS.recall || sS.pair) root.user().auth(JSON.parse(sS.pair), cb); // pair is more reliable than alias/pass\n            }\n          }catch(e){}\n        }\n        return gun;\n      }\n      /*\n        TODO: copy mhelander's expiry code back in.\n        Although, we should check with community,\n        should expiry be core or a plugin?\n      */\n      return gun;\n    }\n  })(USE, './recall');\n\n  ;USE(function(module){\n    var User = USE('./user'), SEA = User.SEA, Gun = User.GUN, noop = function(){};\n    User.prototype.pair = function(){\n      var user = this, proxy; // undeprecated, hiding with proxies.\n      try{ proxy = new Proxy({DANGER:'\\u2620'}, {get: function(t,p,r){\n        if(!user.is || !(user._||'').sea){ return }\n        return user._.sea[p];\n      }})}catch(e){}\n      return proxy;\n    }\n    // If authenticated user wants to delete his/her account, let's support it!\n    User.prototype.delete = async function(alias, pass, cb){\n      console.log(\"user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!\");\n      var gun = this, root = gun.back(-1), user = gun.back('user');\n      try {\n        user.auth(alias, pass, function(ack){\n          var pub = (user.is||{}).pub;\n          // Delete user data\n          user.map().once(function(){ this.put(null) });\n          // Wipe user data from memory\n          user.leave();\n          (cb || noop)({ok: 0});\n        });\n      } catch (e) {\n        Gun.log('User.delete failed! Error:', e);\n      }\n      return gun;\n    }\n    User.prototype.alive = async function(){\n      console.log(\"user.alive() IS DEPRECATED!!!\");\n      const gunRoot = this.back(-1)\n      try {\n        // All is good. Should we do something more with actual recalled data?\n        await authRecall(gunRoot)\n        return gunRoot._.user._\n      } catch (e) {\n        const err = 'No session!'\n        Gun.log(err)\n        throw { err }\n      }\n    }\n    User.prototype.trust = async function(user){\n      console.log(\"`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!\");\n      // TODO: BUG!!! SEA `node` read listener needs to be async, which means core needs to be async too.\n      //gun.get('alice').get('age').trust(bob);\n      if (Gun.is(user)) {\n        user.get('pub').get((ctx, ev) => {\n          console.log(ctx, ev)\n        })\n      }\n      user.get('trust').get(path).put(theirPubkey);\n\n      // do a lookup on this gun chain directly (that gets bob's copy of the data)\n      // do a lookup on the metadata trust table for this path (that gets all the pubkeys allowed to write on this path)\n      // do a lookup on each of those pubKeys ON the path (to get the collab data \"layers\")\n      // THEN you perform Jachen's mix operation\n      // and return the result of that to...\n    }\n    User.prototype.grant = function(to, cb){\n      console.log(\"`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!\");\n      var gun = this, user = gun.back(-1).user(), pair = user._.sea, path = '';\n      gun.back(function(at){ if(at.is){ return } path += (at.get||'') });\n      (async function(){\n      var enc, sec = await user.get('grant').get(pair.pub).get(path).then();\n      sec = await SEA.decrypt(sec, pair);\n      if(!sec){\n        sec = SEA.random(16).toString();\n        enc = await SEA.encrypt(sec, pair);\n        user.get('grant').get(pair.pub).get(path).put(enc);\n      }\n      var pub = to.get('pub').then();\n      var epub = to.get('epub').then();\n      pub = await pub; epub = await epub;\n      var dh = await SEA.secret(epub, pair);\n      enc = await SEA.encrypt(sec, dh);\n      user.get('grant').get(pub).get(path).put(enc, cb);\n      }());\n      return gun;\n    }\n    User.prototype.secret = function(data, cb){\n      console.log(\"`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!\");\n      var gun = this, user = gun.back(-1).user(), pair = user.pair(), path = '';\n      gun.back(function(at){ if(at.is){ return } path += (at.get||'') });\n      (async function(){\n      var enc, sec = await user.get('trust').get(pair.pub).get(path).then();\n      sec = await SEA.decrypt(sec, pair);\n      if(!sec){\n        sec = SEA.random(16).toString();\n        enc = await SEA.encrypt(sec, pair);\n        user.get('trust').get(pair.pub).get(path).put(enc);\n      }\n      enc = await SEA.encrypt(data, sec);\n      gun.put(enc, cb);\n      }());\n      return gun;\n    }\n\n    /**\n     * returns the decrypted value, encrypted by secret\n     * @returns {Promise<any>}\n     // Mark needs to review 1st before officially supported\n    User.prototype.decrypt = function(cb) {\n      let gun = this,\n        path = ''\n      gun.back(function(at) {\n        if (at.is) {\n          return\n        }\n        path += at.get || ''\n      })\n      return gun\n        .then(async data => {\n          if (data == null) {\n            return\n          }\n          const user = gun.back(-1).user()\n          const pair = user.pair()\n          let sec = await user\n            .get('trust')\n            .get(pair.pub)\n            .get(path)\n          sec = await SEA.decrypt(sec, pair)\n          if (!sec) {\n            return data\n          }\n          let decrypted = await SEA.decrypt(data, sec)\n          return decrypted\n        })\n        .then(res => {\n          cb && cb(res)\n          return res\n        })\n    }\n    */\n    module.exports = User\n  })(USE, './share');\n\n  ;USE(function(module){\n    var SEA = USE('./sea'), S = USE('./settings'), noop = function() {}, u;\n    var Gun = (''+u != typeof window)? (window.Gun||{on:noop}) : USE((''+u === typeof MODULE?'.':'')+'./gun', 1);\n    // After we have a GUN extension to make user registration/login easy, we then need to handle everything else.\n\n    // We do this with a GUN adapter, we first listen to when a gun instance is created (and when its options change)\n    Gun.on('opt', function(at){\n      if(!at.sea){ // only add SEA once per instance, on the \"at\" context.\n        at.sea = {own: {}};\n        at.on('put', check, at); // SEA now runs its firewall on HAM diffs, not all i/o.\n      }\n      this.to.next(at); // make sure to call the \"next\" middleware adapter.\n    });\n\n    // Alright, this next adapter gets run at the per node level in the graph database.\n    // correction: 2020 it gets run on each key/value pair in a node upon a HAM diff.\n    // This will let us verify that every property on a node has a value signed by a public key we trust.\n    // If the signature does not match, the data is just `undefined` so it doesn't get passed on.\n    // If it does match, then we transform the in-memory \"view\" of the data into its plain value (without the signature).\n    // Now NOTE! Some data is \"system\" data, not user data. Example: List of public keys, aliases, etc.\n    // This data is self-enforced (the value can only match its ID), but that is handled in the `security` function.\n    // From the self-enforced data, we can see all the edges in the graph that belong to a public key.\n    // Example: ~ASDF is the ID of a node with ASDF as its public key, signed alias and salt, and\n    // its encrypted private key, but it might also have other signed values on it like `profile = <ID>` edge.\n    // Using that directed edge's ID, we can then track (in memory) which IDs belong to which keys.\n    // Here is a problem: Multiple public keys can \"claim\" any node's ID, so this is dangerous!\n    // This means we should ONLY trust our \"friends\" (our key ring) public keys, not any ones.\n    // I have not yet added that to SEA yet in this alpha release. That is coming soon, but beware in the meanwhile!\n\n    function check(msg){ // REVISE / IMPROVE, NO NEED TO PASS MSG/EVE EACH SUB?\n      var eve = this, at = eve.as, put = msg.put, soul = put['#'], key = put['.'], val = put[':'], state = put['>'], id = msg['#'], tmp;\n      if(!soul || !key){ return }\n      if((msg._||'').faith && (at.opt||'').faith && 'function' == typeof msg._){\n        SEA.opt.pack(put, function(raw){\n        SEA.verify(raw, false, function(data){ // this is synchronous if false\n          put['='] = SEA.opt.unpack(data);\n          eve.to.next(msg);\n        })})\n        return \n      }\n      var no = function(why){ at.on('in', {'@': id, err: msg.err = why}) }; // exploit internal relay stun for now, maybe violates spec, but testing for now. // Note: this may be only the sharded message, not original batch.\n      //var no = function(why){ msg.ack(why) };\n      (msg._||'').DBG && ((msg._||'').DBG.c = +new Date);\n      if(0 <= soul.indexOf('<?')){ // special case for \"do not sync data X old\" forget\n        // 'a~pub.key/b<?9'\n        tmp = parseFloat(soul.split('<?')[1]||'');\n        if(tmp && (state < (Gun.state() - (tmp * 1000)))){ // sec to ms\n          (tmp = msg._) && (tmp.stun) && (tmp.stun--); // THIS IS BAD CODE! It assumes GUN internals do something that will probably change in future, but hacking in now.\n          return; // omit!\n        }\n      }\n      \n      if('~@' === soul){  // special case for shared system data, the list of aliases.\n        check.alias(eve, msg, val, key, soul, at, no); return;\n      }\n      if('~@' === soul.slice(0,2)){ // special case for shared system data, the list of public keys for an alias.\n        check.pubs(eve, msg, val, key, soul, at, no); return;\n      }\n      //if('~' === soul.slice(0,1) && 2 === (tmp = soul.slice(1)).split('.').length){ // special case, account data for a public key.\n      if(tmp = SEA.opt.pub(soul)){ // special case, account data for a public key.\n        check.pub(eve, msg, val, key, soul, at, no, at.user||'', tmp); return;\n      }\n      if(0 <= soul.indexOf('#')){ // special case for content addressing immutable hashed data.\n        check.hash(eve, msg, val, key, soul, at, no); return;\n      } \n      check.any(eve, msg, val, key, soul, at, no, at.user||''); return;\n      eve.to.next(msg); // not handled\n    }\n    check.hash = function(eve, msg, val, key, soul, at, no){\n      SEA.work(val, null, function(data){\n        if(data && data === key.split('#').slice(-1)[0]){ return eve.to.next(msg) }\n        no(\"Data hash not same as hash!\");\n      }, {name: 'SHA-256'});\n    }\n    check.alias = function(eve, msg, val, key, soul, at, no){ // Example: {_:#~@, ~@alice: {#~@alice}}\n      if(!val){ return no(\"Data must exist!\") } // data MUST exist\n      if('~@'+key === link_is(val)){ return eve.to.next(msg) } // in fact, it must be EXACTLY equal to itself\n      no(\"Alias not same!\"); // if it isn't, reject.\n    };\n    check.pubs = function(eve, msg, val, key, soul, at, no){ // Example: {_:#~@alice, ~asdf: {#~asdf}}\n      if(!val){ return no(\"Alias must exist!\") } // data MUST exist\n      if(key === link_is(val)){ return eve.to.next(msg) } // and the ID must be EXACTLY equal to its property\n      no(\"Alias not same!\"); // that way nobody can tamper with the list of public keys.\n    };\n    check.pub = async function(eve, msg, val, key, soul, at, no, user, pub){ var tmp // Example: {_:#~asdf, hello:'world'~fdsa}}\n      const raw = await S.parse(val) || {}\n      const verify = (certificate, certificant, cb) => {\n        if (certificate.m && certificate.s && certificant && pub)\n          // now verify certificate\n          return SEA.verify(certificate, pub, data => { // check if \"pub\" (of the graph owner) really issued this cert\n            if (u !== data && u !== data.e && msg.put['>'] && msg.put['>'] > parseFloat(data.e)) return no(\"Certificate expired.\") // certificate expired\n            // \"data.c\" = a list of certificants/certified users\n            // \"data.w\" = lex WRITE permission, in the future, there will be \"data.r\" which means lex READ permission\n            if (u !== data && data.c && data.w && (data.c === certificant || data.c.indexOf('*' || certificant) > -1)) {\n              // ok, now \"certificant\" is in the \"certificants\" list, but is \"path\" allowed? Check path\n              let path = soul.indexOf('/') > -1 ? soul.replace(soul.substring(0, soul.indexOf('/') + 1), '') : ''\n              String.match = String.match || Gun.text.match\n              const w = Array.isArray(data.w) ? data.w : typeof data.w === 'object' || typeof data.w === 'string' ? [data.w] : []\n              for (const lex of w) {\n                if ((String.match(path, lex['#']) && String.match(key, lex['.'])) || (!lex['.'] && String.match(path, lex['#'])) || (!lex['#'] && String.match(key, lex['.'])) || String.match((path ? path + '/' + key : key), lex['#'] || lex)) {\n                  // is Certificant forced to present in Path\n                  if (lex['+'] && lex['+'].indexOf('*') > -1 && path && path.indexOf(certificant) == -1 && key.indexOf(certificant) == -1) return no(`Path \"${path}\" or key \"${key}\" must contain string \"${certificant}\".`)\n                  // path is allowed, but is there any WRITE block? Check it out\n                  if (data.wb && (typeof data.wb === 'string' || ((data.wb || {})['#']))) { // \"data.wb\" = path to the WRITE block\n                    var root = eve.as.root.$.back(-1)\n                    if (typeof data.wb === 'string' && '~' !== data.wb.slice(0, 1)) root = root.get('~' + pub)\n                    return root.get(data.wb).get(certificant).once(value => {\n                      if (value && (value === 1 || value === true)) return no(`Certificant ${certificant} blocked.`)\n                      return cb(data)\n                    })\n                  }\n                  return cb(data)\n                }\n              }\n              return no(\"Certificate verification fail.\")\n            }\n          })\n        return\n      }\n      \n      if ('pub' === key && '~' + pub === soul) {\n        if (val === pub) return eve.to.next(msg) // the account MUST match `pub` property that equals the ID of the public key.\n        return no(\"Account not same!\")\n      }\n\n      if ((tmp = user.is) && tmp.pub && !raw['*'] && !raw['+'] && (pub === tmp.pub || (pub !== tmp.pub && ((msg._.msg || {}).opt || {}).cert))){\n        SEA.opt.pack(msg.put, packed => {\n          SEA.sign(packed, (user._).sea, async function(data) {\n            if (u === data) return no(SEA.err || 'Signature fail.')\n            msg.put[':'] = {':': tmp = SEA.opt.unpack(data.m), '~': data.s}\n            msg.put['='] = tmp\n  \n            // if writing to own graph, just allow it\n            if (pub === user.is.pub) {\n              if (tmp = link_is(val)) (at.sea.own[tmp] = at.sea.own[tmp] || {})[pub] = 1\n              JSON.stringifyAsync(msg.put[':'], function(err,s){\n                if(err){ return no(err || \"Stringify error.\") }\n                msg.put[':'] = s;\n                return eve.to.next(msg);\n              })\n              return\n            }\n  \n            // if writing to other's graph, check if cert exists then try to inject cert into put, also inject self pub so that everyone can verify the put\n            if (pub !== user.is.pub && ((msg._.msg || {}).opt || {}).cert) {\n              const cert = await S.parse(msg._.msg.opt.cert)\n              // even if cert exists, we must verify it\n              if (cert && cert.m && cert.s)\n                verify(cert, user.is.pub, _ => {\n                  msg.put[':']['+'] = cert // '+' is a certificate\n                  msg.put[':']['*'] = user.is.pub // '*' is pub of the user who puts\n                  JSON.stringifyAsync(msg.put[':'], function(err,s){\n                    if(err){ return no(err || \"Stringify error.\") }\n                    msg.put[':'] = s;\n                    return eve.to.next(msg);\n                  })\n                  return\n                })\n            }\n          }, {raw: 1})\n        })\n        return;\n      }\n\n      SEA.opt.pack(msg.put, packed => {\n        SEA.verify(packed, raw['*'] || pub, function(data){ var tmp;\n          data = SEA.opt.unpack(data);\n          if (u === data) return no(\"Unverified data.\") // make sure the signature matches the account it claims to be on. // reject any updates that are signed with a mismatched account.\n          if ((tmp = link_is(data)) && pub === SEA.opt.pub(tmp)) (at.sea.own[tmp] = at.sea.own[tmp] || {})[pub] = 1\n          \n          // check if cert ('+') and putter's pub ('*') exist\n          if (raw['+'] && raw['+']['m'] && raw['+']['s'] && raw['*'])\n            // now verify certificate\n            verify(raw['+'], raw['*'], _ => {\n              msg.put['='] = data;\n              return eve.to.next(msg);\n            })\n          else {\n            msg.put['='] = data;\n            return eve.to.next(msg);\n          }\n        });\n      })\n      return\n    };\n    check.any = function(eve, msg, val, key, soul, at, no, user){ var tmp, pub;\n      if(at.opt.secure){ return no(\"Soul missing public key at '\" + key + \"'.\") }\n      // TODO: Ask community if should auto-sign non user-graph data.\n      at.on('secure', function(msg){ this.off();\n        if(!at.opt.secure){ return eve.to.next(msg) }\n        no(\"Data cannot be changed.\");\n      }).on.on('secure', msg);\n      return;\n    }\n\n    var valid = Gun.valid, link_is = function(d,l){ return 'string' == typeof (l = valid(d)) && l }, state_ify = (Gun.state||'').ify;\n\n    var pubcut = /[^\\w_-]/; // anything not alphanumeric or _ -\n    SEA.opt.pub = function(s){\n      if(!s){ return }\n      s = s.split('~');\n      if(!s || !(s = s[1])){ return }\n      s = s.split(pubcut).slice(0,2);\n      if(!s || 2 != s.length){ return }\n      if('@' === (s[0]||'')[0]){ return }\n      s = s.slice(0,2).join('.');\n      return s;\n    }\n    SEA.opt.stringy = function(t){\n      // TODO: encrypt etc. need to check string primitive. Make as breaking change.\n    }\n    SEA.opt.pack = function(d,cb,k, n,s){ var tmp, f; // pack for verifying\n      if(SEA.opt.check(d)){ return cb(d) }\n      if(d && d['#'] && d['.'] && d['>']){ tmp = d[':']; f = 1 }\n      JSON.parseAsync(f? tmp : d, function(err, meta){\n        var sig = ((u !== (meta||'')[':']) && (meta||'')['~']); // or just ~ check?\n        if(!sig){ cb(d); return }\n        cb({m: {'#':s||d['#'],'.':k||d['.'],':':(meta||'')[':'],'>':d['>']||Gun.state.is(n, k)}, s: sig});\n      });\n    }\n    var O = SEA.opt;\n    SEA.opt.unpack = function(d, k, n){ var tmp;\n      if(u === d){ return }\n      if(d && (u !== (tmp = d[':']))){ return tmp }\n      k = k || O.fall_key; if(!n && O.fall_val){ n = {}; n[k] = O.fall_val }\n      if(!k || !n){ return }\n      if(d === n[k]){ return d }\n      if(!SEA.opt.check(n[k])){ return d }\n      var soul = (n && n._ && n._['#']) || O.fall_soul, s = Gun.state.is(n, k) || O.fall_state;\n      if(d && 4 === d.length && soul === d[0] && k === d[1] && fl(s) === fl(d[3])){\n        return d[2];\n      }\n      if(s < SEA.opt.shuffle_attack){\n        return d;\n      }\n    }\n    SEA.opt.shuffle_attack = 1546329600000; // Jan 1, 2019\n    var fl = Math.floor; // TODO: Still need to fix inconsistent state issue.\n    // TODO: Potential bug? If pub/priv key starts with `-`? IDK how possible.\n\n  })(USE, './index');\n}());\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","modifiers","_v","attrs","staticClass","model","value","callback","$$v","username","expression","passphrase","on","login","leave","_s","message","staticRenderFns","data","user","undefined","console","methods","loginCallback","ack","log","is","$store","commit","component","PROPER_FUNCTION_NAME","fails","whitespaces","non","module","exports","METHOD_NAME","uncurryThis","requireObjectCoercible","toString","replace","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","start","end","trim","$","$trim","forcedStringTrimMethod","target","proto","forced","USE","arg","req","slice","R","mod","path","p","split","MODULE","window","u","tmp","SEA","e","location","protocol","indexOf","host","test","hostname","warn","btoa","Buffer","g","from","atob","SeaArray","Object","assign","Array","prototype","create","enc","length","buf","Uint8Array","keys","map","i","padStart","join","_","String","fromCharCode","SafeBuffer","props","arguments","TypeError","input","bytes","match","byte","parseInt","words","Uint16Array","charCodeAt","dec","info","byteLength","ArrayBuffer","alloc","fill","allocUnsafe","concat","arr","isArray","reduce","ret","item","api","o","JSON","parseAsync","t","cb","r","parse","stringifyAsync","v","s","stringify","Promise","res","rej","err","raw","crypto","msCrypto","subtle","webkitSubtle","TextEncoder","TextDecoder","random","len","getRandomValues","randomBytes","Crypto","WebCrypto","ossl","directory","shim","hash","iter","ks","pair","namedCurve","sign","pub","d","x","y","jwk","kty","crv","ext","key_ops","keyBytes","keyB64","k","alg","validity","hook","async","yes","opt","digest","encode","__shim","sha1hash","b","S","sha","work","salt","epub","Function","toLowerCase","rsha","key","importKey","deriveBits","iterations","pbkdf2","throw","ecdhSubtle","sa","generateKey","then","priv","exportKey","privateKey","publicKey","dh","epriv","I","what","how","why","json","check","verify","m","sig","slow_leak","fallback","fall_verify","knownKeys","O","f","unpack","fall_soul","fall_key","fall_val","fall_state","sha256hash","importGen","combo","jwkKey","keyToJwk","aeskey","encrypt","msg","rand","iv","ct","aes","decrypt","bufiv","bufct","tagLength","decode","secret","pubKeyData","keysToEcdhJwk","public","privKeyData","derived","privKey","derivedBits","rawBits","derivedKey","certify","certificants","policy","authority","certificant","push","expiry","parseFloat","readPolicy","read","writePolicy","write","block","blacklist","ban","readBlock","writeBlock","c","w","rb","wb","certificate","keyid","pb","id","sha1","GUN","Gun","User","root","lex","state","chain","F","constructor","gun","back","get","at","uuid","call","once","noop","args","alias","pass","filter","cat","ing","wait","act","a","pubs","already","proof","sea","auth","ek","put","h","link","eve","off","ok","sS","sessionStorage","recall","obj_ify","forEach","list","shift","half","lol","upt","tag","graph","shuffle","change","z","remember","setTimeout","plugin","proxy","Proxy","DANGER","delete","alive","gunRoot","authRecall","trust","ctx","ev","theirPubkey","grant","to","sec","as","soul","val","faith","pack","next","no","DBG","Date","stun","any","own","link_is","substring","text","cert","packed","secure","valid","l","pubcut","ify","stringy","n","meta","fl","shuffle_attack","Math","floor"],"sourceRoot":""}