"use strict";(self["webpackChunkagents"]=self["webpackChunkagents"]||[]).push([[976],{3976:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("b-button",{attrs:{size:"sm"},on:{click:function(t){e.currentNode=null}}},[e._v("Close")]),e._v(" navigation : "+e._s(e.navigation)+" "),n("h1",[e._v(e._s(e.currentNode.name))]),n("b",[e._v("id :")]),e._v(" "+e._s(e.currentNode.id)+" | "),n("b",[e._v("type :")]),e._v(" "+e._s(e.currentNode.type)+" "),"world"==e.currentNode.type?n("BrainNode"):n("NodePreview",{attrs:{node:e.currentNode}}),n("br"),e._v(" todo put the following in a decent neurone module : "),n("b-container",[n("b-row",[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"name"}},[e._v("Name:")])]),n("b-col",{attrs:{sm:"9"}},[n("b-form-input",{attrs:{id:"name",autocomplete:"off",autofocus:""},model:{value:e.node.name,callback:function(t){e.$set(e.node,"name",t)},expression:"node.name"}})],1),n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"age"}},[n("code",[e._v("Age")]),e._v(":")])]),n("b-col",[n("b-form-input",{attrs:{id:"age",required:"",type:"number"},model:{value:e.node.age,callback:function(t){e.$set(e.node,"age",t)},expression:"node.age"}})],1)],1),e._l(e.node.properties,(function(t){return n("b-row",{key:t.name},[n("b-col",{attrs:{sm:"3"}},[n("label",{attrs:{for:"name"}},[n("code",[e._v(e._s(t.name))]),e._v(":")])]),n("b-col",{attrs:{sm:"9"}},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(n){return e.showFieldModal(t)}}},[e._v("+")]),n("Values",{attrs:{values:t.values}})],1)],1)})),null!=e.field?n("b-row",{staticClass:"mt-3"},[n("b-col",{attrs:{sm:"3"}},[n("b-form-input",{attrs:{required:"",placeholder:"property name"},on:{change:e.fieldNameChanged},model:{value:e.field.name,callback:function(t){e.$set(e.field,"name",t)},expression:"field.name"}})],1),n("b-col",{attrs:{sm:"9"}},[n("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:e.clear_field}},[e._v("X")])],1)],1):e._e(),n("b-row",[n("b-col"),n("b-col",[n("b-btn",{attrs:{variant:"outline-primary",size:"sm"},on:{click:e.add}},[e._v("+ add a property or a link")])],1)],1),n("b-row",[n("b-col",[n("b-btn",{attrs:{variant:"success"},on:{click:e.save}},[e._v("Save Node")]),n("Permissions",{attrs:{permissions:e.permissions,url:e.node.url,autorized:e.autorized}})],1)],1),n("b-modal",{attrs:{id:"fieldModal",size:"xl",title:e.node.name+" -> "+e.currentProp.name}},[n("b-tabs",{attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"text",active:""},on:{click:function(t){e.fieldType="text"}}},[n("b-form-input",{attrs:{placeholder:"new value"},on:{change:e.addNewValue},model:{value:e.newvalue,callback:function(t){e.newvalue=t},expression:"newvalue"}})],1),n("b-tab",{attrs:{title:"textarea"},on:{click:function(t){e.fieldType="textarea"}}},[n("b-form-textarea",{attrs:{placeholder:"Enter something...",rows:"3","max-rows":"6"},on:{change:e.addNewValue},model:{value:e.newvalue,callback:function(t){e.newvalue=t},expression:"newvalue"}})],1),n("b-tab",{attrs:{title:"node"},on:{click:function(t){e.fieldType="node"}}},[n("NodeSelector",{attrs:{currentProp:e.currentProp},on:{"update:currentProp":function(t){e.currentProp=t},"update:current-prop":function(t){e.currentProp=t}}})],1),n("b-tab",{attrs:{title:"link"},on:{click:function(t){e.fieldType="link"}}},[n("b-form-input",{attrs:{placeholder:"name"},model:{value:e.link.name,callback:function(t){e.$set(e.link,"name",t)},expression:"link.name"}}),n("b-form-input",{attrs:{placeholder:"link"},on:{change:e.addNewLink},model:{value:e.link.href,callback:function(t){e.$set(e.link,"href",t)},expression:"link.href"}})],1)],1)],1)],2),"html"==e.currentNode.type?n("b-container",[n("CKWysiwyg")],1):e._e()],1)},i=[],r=n(7197),a={name:"Node",components:{NodeSelector:()=>n.e(284).then(n.bind(n,9769)),Values:()=>n.e(324).then(n.bind(n,324)),Permissions:()=>n.e(761).then(n.bind(n,7761)),CKWysiwyg:()=>n.e(738).then(n.bind(n,5738)),NodePreview:()=>n.e(205).then(n.bind(n,6205)),BrainNode:()=>n.e(806).then(n.bind(n,9806))},data(){return{node:null,field:null,clearing:!1,fieldType:"text",show:!1,currentProp:{},newvalue:null,link:{},permissions:null}},async created(){this.node=null!=this.$store.state.app.currentNode?this.$store.state.app.currentNode:new r.GI({name:"",age:0,type:"neurone"}),console.log("neurone ",this.node),await this.getPermissions()},methods:{async save(){await this.$store.dispatch("nodes/saveNode",this.node),this.$store.commit("nodes/setCurrentNode",null),this.$store.commit("app/setCurrentNode",null),alert("node saved")},add(){this.field={name:""}},fieldNameChanged(e){if(console.log(e),0==this.clearing){let n={name:e,values:[]};void 0==this.node.properties&&(this.node.properties=[]);var t=this.node.properties.findIndex((e=>e.name==n.name));-1===t?this.node.properties.push(n):alert(n.name+" already exist")}},clear_field(){this.clearing=!0,this.field=null,this.clearing=!1},showFieldModal(e){console.log(e),this.fieldType="text",this.currentProp=e,this.$bvModal.show("fieldModal")},addNewValue(){let e={value:this.newvalue,type:this.fieldType};this.currentProp.values.push(e),this.newvalue=null},addNewLink(){let e={value:this.link,type:this.fieldType};this.currentProp.values.push(e),this.link={}},async getPermissions(){this.permissions=void 0!=this.node.url?await this.$getPermissions(this.node):null,console.log("PERMISSIONS",this.permissions)}},watch:{currentNode(){console.log("CURRENT NODE Changed"),this.getPermissions()}},computed:{currentNode:{get(){return this.$store.state.app.currentNode},set(e){this.$store.commit("app/setCurrentNode",e)}},navigation:{get(){return this.$store.state.app.navigation},set(e){this.$store.commit("app/setNavigation",e)}},autorized(){return null!=this.permissions&&(1==this.permissions.user.append||1==this.permissions.user.write||1==this.permissions.public.append||1==this.permissions.public.write)}}},o=a,l=n(1001),c=(0,l.Z)(o,s,i,!1,null,null,null),u=c.exports},7197:function(e,t,n){n.d(t,{am:function(){return a},mY:function(){return l},GI:function(){return o}});var s=n(2045),i={"@context":{as:"https://www.w3.org/ns/activitystreams#",ve:"https://scenaristeur.github.io/verse#",id:"@id",type:"@type",name:"ve:name",age:"ve:age",url:"ve:url",privacy:"ve:privacy",properties:"ve:properties",links:"ve:links",synapses:"ve:synapses",created:"ve:created",updated:"ve:updated",synchronized:"ve:synchronized"},id:null,name:"",age:0,url:"",privacy:"private",type:null,properties:[],links:[],synapses:[],created:null,updated:null,synchronized:null};class r{constructor(e={}){Object.assign(this,i),this.id=(0,s.Z)(),this["type"]="base",this["created"]=Date.now(),Object.assign(this,e)}debug(){console.log(this)}}class a extends r{constructor(e={}){super(e),void 0==e["type"]&&(this["type"]="brain")}}class o extends r{constructor(e={}){super(e),void 0==e["type"]&&(this["type"]="neurone")}}class l extends r{constructor(e={}){super(e),void 0==e["type"]&&(this["type"]="command"),this.init(e.inputValue)}init(e){if(this.isValidUrl(e))this.type="url",this.value=e,this.isFile=this.isFile(e);else{let t=e.charAt(0),n="";switch(t){case"/":this.type="commande",this.value=e,this.inputNew="";break;case".":n=this.commandHistory[this.commandHistory.length-1],this.inputNew=n.s+" "+n.p+" "+n.o;break;case";":n=this.commandHistory[this.commandHistory.length-1],this.inputNew=n.s+" "+n.p+" ";break;case",":n=this.commandHistory[this.commandHistory.length-1],this.inputNew=n.s+" ";break;default:this.traiteTriplet(e)}}return this}traiteTriplet(e){var t={},n="";let s=e.slice(-1),i=e.slice(0,-1).split(" "),r=!0,a="",o=[];switch(i.forEach((function(e){e=e.trim(),e.startsWith('"')?(a="debut",o.push(e.substr(1))):e.endsWith('"')?(a="fin",o.push(o.pop()+" "+e.slice(0,-1))):"debut"==a?o.push(o.pop()+" "+e):o.push(e)})),o.length>0&&(i=o),s){case".":n="";break;case";":n=i[0].indexOf(" ")>-1?'"'+i[0]+'" ':i[0]+" ";break;case",":n=i[0].indexOf(" ")>-1?'"'+i[0]+'" ':i[0]+" ",i[1].indexOf(" ")>-1?n+='"'+i[1]+'" ':n+=i[1]+" ";break;case"-":n=i[2].indexOf(" ")>-1?'"'+i[2]+'" ':i[2]+" ";break;default:console.log("message to chat "+e),n="",r=!1}if(r){t.type="triplet";var l={};l.subject=i[0],l.predicate=i[1],l.object=i[2],t.value=l,t.inputNew=n}else t.type="message",t.value=e,t.inputNew=n;Object.assign(this,t)}isValidUrl(e){try{return new URL(e),!0}catch(t){return!1}}isFile(e){return e.split("/").pop().indexOf(".")>-1}}}}]);
//# sourceMappingURL=976.de12da94.js.map